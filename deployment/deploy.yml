---
- hosts: gbm-server
  remote_user: root
  become: yes
  become_method: su
  become_user: gbm

  tasks:
    # download the application
    - name: clone git repository
      git:
        repo: https://github.com/devinit/grand-bargain-monitoring.git
        dest: /home/gbm/grand-bargain-monitoring
        update: yes
        version: dev

    # install requirements
    - name: install pip requirements
      pip:
        requirements: /home/gbm/grand-bargain-monitoring/requirements.txt
        # executable: pip
        virtualenv: /home/gbm/grand-bargain-monitoring/pyenv
        virtualenv_python: python3
        virtualenv_site_packages: no

    # copy apache config file to correct location

    # create remote data directory

    # download remote data

    # set up cron job to update remote data on regular basis

    # run the app
